{"ast":null,"code":"import { deepClone, get, isNil } from './utils/helpers.js';\nimport { lottieColorToHex, properties, resetProperties, updateProperties } from './utils/lottie.js';\n/**\n * Scale factor for supported customizable properties.\n */\nexport const PROPERTY_SCALE = 50;\n/**\n * Prefix for icon states. Properties with this prefix are handled as icon states.\n */\nexport const STATE_PREFIX = 'state-';\n/**\n * Default lottie-web options used by provided Player.\n */\nexport const DEFAULT_LOTTIE_WEB_OPTIONS = {\n  renderer: \"svg\",\n  loop: false,\n  autoplay: false,\n  rendererSettings: {\n    preserveAspectRatio: \"xMidYMid meet\",\n    progressiveLoad: true,\n    hideOnTransparent: true\n  }\n};\n/**\n * Create convenient proxy for manipulating colors.\n */\nfunction createColorsProxy() {\n  return new Proxy(this, {\n    set: (target, property, value, receiver) => {\n      if (typeof property === 'string') {\n        if (value) {\n          updateProperties(this.lottie, this.rawProperties.filter(c => c.type === 'color' && c.name === property.toLowerCase()), value);\n        } else {\n          resetProperties(this.lottie, this.rawProperties.filter(c => c.type === 'color' && c.name === property.toLowerCase()));\n        }\n        target.refresh();\n      }\n      return true;\n    },\n    get: (target, property, receiver) => {\n      for (const current of target.rawProperties) {\n        if (current.type == 'color' && typeof property === 'string' && property.toLowerCase() == current.name) {\n          const data = get(this.lottie, current.path);\n          if (data) {\n            return lottieColorToHex(data);\n          }\n        }\n      }\n      return undefined;\n    },\n    deleteProperty: (target, property) => {\n      if (typeof property === 'string') {\n        resetProperties(this.lottie, this.rawProperties.filter(c => c.type === 'color' && c.name === property.toLowerCase()));\n        target.refresh();\n      }\n      return true;\n    },\n    ownKeys: target => {\n      return target.rawProperties.filter(c => c.type == 'color').map(c => c.name);\n    },\n    has: (target, property) => {\n      for (const current of target.rawProperties) {\n        if (current.type == 'color' && typeof property === 'string' && property.toLowerCase() == current.name) {\n          return true;\n        }\n      }\n      return false;\n    },\n    getOwnPropertyDescriptor: target => {\n      return {\n        enumerable: true,\n        configurable: true\n      };\n    }\n  });\n}\n/**\n * The player implementation as a wrapper around `lottie-web`.\n *\n * Main purposes:\n *\n * - Provides simple API to control animation and customize icon properties on the fly.\n * - Allows to react on the animation life cycle.\n * - Separate integration with `lottie-web` from our custom element. That way, the player can potentially work without a _custom element_.\n * - Simplifies custom element implementation.\n * - Simplifies testing.\n */\nexport class Player {\n  _animationLoader;\n  _container;\n  _iconData;\n  _options;\n  _lottie;\n  _isReady = false;\n  _colorsProxy;\n  _direction = 1;\n  _speed = 1;\n  _rawProperties;\n  _eventCallbacks = {};\n  /**\n   *\n   * @param animationLoader Provide `loadAnimation` here from `lottie-web`.\n   * @param container DOM element in which the animation will be drawn.\n   * @param iconData Lottie icon data.\n   * @param options Options for `lottie-web`. If not provided {@link DEFAULT_LOTTIE_WEB_OPTIONS | default} will be used.\n   */\n  constructor(animationLoader, container, iconData, options) {\n    this._animationLoader = animationLoader;\n    this._container = container;\n    this._iconData = iconData;\n    this._options = options || DEFAULT_LOTTIE_WEB_OPTIONS;\n  }\n  connect() {\n    if (this._lottie) {\n      throw new Error('Already connected player!');\n    }\n    this._lottie = this._animationLoader({\n      ...this._options,\n      container: this._container,\n      animationData: deepClone(this._iconData)\n    });\n    this._lottie.addEventListener('complete', () => {\n      this.triggerEvent('complete');\n    });\n    this._lottie.addEventListener('loopComplete', () => {\n      this.triggerEvent('complete');\n    });\n    this._lottie.addEventListener('enterFrame', params => {\n      this.triggerEvent('frame');\n    });\n    if (this._lottie.isLoaded) {\n      this._isReady = true;\n      this.triggerEvent('ready');\n    } else {\n      this._lottie.addEventListener('config_ready', () => {\n        this._isReady = true;\n        this.triggerEvent('ready');\n      });\n    }\n  }\n  disconnect() {\n    if (!this._lottie) {\n      throw new Error('Not connected player!');\n    }\n    this._isReady = false;\n    this._lottie.destroy();\n    this._lottie = undefined;\n    this._colorsProxy = undefined;\n    this._rawProperties = undefined;\n  }\n  addEventListener(name, callback) {\n    if (!this._eventCallbacks[name]) {\n      this._eventCallbacks[name] = [];\n    }\n    this._eventCallbacks[name].push(callback);\n    return () => {\n      this.removeEventListener(name, callback);\n    };\n  }\n  removeEventListener(eventName, callback) {\n    if (!callback) {\n      this._eventCallbacks[eventName] = null;\n    } else if (this._eventCallbacks[eventName]) {\n      let i = 0;\n      let len = this._eventCallbacks[eventName].length;\n      while (i < len) {\n        if (this._eventCallbacks[eventName][i] === callback) {\n          this._eventCallbacks[eventName].splice(i, 1);\n          i -= 1;\n          len -= 1;\n        }\n        i += 1;\n      }\n      if (!this._eventCallbacks[eventName].length) {\n        this._eventCallbacks[eventName] = null;\n      }\n    }\n  }\n  /**\n   * Trigger event.\n   * @param eventName Event name.\n   * @param args Args.\n   */\n  triggerEvent(eventName, args) {\n    if (this._eventCallbacks[eventName]) {\n      const callbacks = this._eventCallbacks[eventName];\n      for (let i = 0; i < callbacks.length; i += 1) {\n        callbacks[i](args);\n      }\n    }\n  }\n  /**\n   * Refresh animation and notify about that fact.\n   */\n  refresh() {\n    this._lottie?.renderer.renderFrame(null);\n    this.triggerEvent('refresh');\n  }\n  play() {\n    this._lottie.play();\n  }\n  playFromBegining() {\n    this._lottie.goToAndPlay(0);\n  }\n  pause() {\n    this._lottie.pause();\n  }\n  stop() {\n    this._lottie.stop();\n  }\n  goToFrame(frame) {\n    this._lottie.goToAndStop(frame, true);\n  }\n  goToFirstFrame() {\n    this.goToFrame(0);\n  }\n  goToLastFrame() {\n    this.goToFrame(Math.max(0, this._lottie.getDuration(true) - 1));\n  }\n  resetProperties() {\n    let properties = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (!properties || typeof properties !== 'object') {\n      return;\n    }\n    // allows to optimize initial assign properties without redundant reset to default\n    const alreadyCustomized = this._rawProperties ? true : false;\n    // colors\n    if (alreadyCustomized) {\n      resetProperties(this._lottie, this.rawProperties.filter(c => c.type === 'color'));\n    }\n    if (properties.colors && !isNil(properties.colors)) {\n      for (const [key, value] of Object.entries(properties.colors)) {\n        updateProperties(this._lottie, this.rawProperties.filter(c => c.type === 'color' && c.name === key.toLowerCase()), value);\n      }\n    }\n    // state\n    if (alreadyCustomized) {\n      resetProperties(this._lottie, this.rawProperties.filter(c => c.name.startsWith(STATE_PREFIX)));\n    }\n    if (!isNil(properties.state) && properties.state) {\n      const name = `${STATE_PREFIX}${properties.state.toLowerCase()}`;\n      updateProperties(this._lottie, this.rawProperties.filter(c => c.name.startsWith(STATE_PREFIX)), 0);\n      updateProperties(this._lottie, this.rawProperties.filter(c => c.name === name), 1);\n    }\n    // stroke\n    if (!isNil(properties.stroke)) {\n      updateProperties(this._lottie, this.rawProperties.filter(c => c.name === 'stroke'), properties.stroke, {\n        scale: PROPERTY_SCALE\n      });\n    } else if (alreadyCustomized) {\n      resetProperties(this._lottie, this.rawProperties.filter(c => c.name === 'stroke'));\n    }\n    // scale\n    if (!isNil(properties.scale)) {\n      updateProperties(this._lottie, this.rawProperties.filter(c => c.name === 'scale'), properties.scale, {\n        scale: PROPERTY_SCALE\n      });\n    } else if (alreadyCustomized) {\n      resetProperties(this._lottie, this.rawProperties.filter(c => c.name === 'scale'));\n    }\n    // axis\n    if (!isNil(properties.axis)) {\n      updateProperties(this._lottie, this.rawProperties.filter(c => c.name === 'axis'), properties.axis, {\n        scale: PROPERTY_SCALE\n      });\n    } else if (alreadyCustomized) {\n      resetProperties(this._lottie, this.rawProperties.filter(c => c.name === 'axis'));\n    }\n    this.refresh();\n  }\n  set colors(colors) {\n    resetProperties(this._lottie, this.rawProperties.filter(c => c.type === 'color'));\n    if (colors) {\n      for (const [key, value] of Object.entries(colors)) {\n        updateProperties(this._lottie, this.rawProperties.filter(c => c.type === 'color' && c.name === key.toLowerCase()), value);\n      }\n    }\n    this.refresh();\n  }\n  get colors() {\n    if (!this._colorsProxy) {\n      this._colorsProxy = createColorsProxy.call(this);\n    }\n    return this._colorsProxy;\n  }\n  set stroke(stroke) {\n    if (isNil(stroke)) {\n      resetProperties(this._lottie, this.rawProperties.filter(c => c.name === 'stroke'));\n    } else {\n      updateProperties(this._lottie, this.rawProperties.filter(c => c.name === 'stroke'), stroke, {\n        scale: PROPERTY_SCALE\n      });\n    }\n    this.refresh();\n  }\n  get stroke() {\n    const property = this.rawProperties.filter(c => c.name === 'stroke')[0];\n    if (property) {\n      return get(this._lottie, property.path) * (PROPERTY_SCALE / property.value);\n    }\n    return null;\n  }\n  set scale(scale) {\n    if (isNil(scale)) {\n      resetProperties(this._lottie, this.rawProperties.filter(c => c.name === 'scale'));\n    } else {\n      updateProperties(this._lottie, this.rawProperties.filter(c => c.name === 'scale'), scale, {\n        scale: PROPERTY_SCALE\n      });\n    }\n    this.refresh();\n  }\n  get scale() {\n    const property = this.rawProperties.filter(c => c.name === 'scale')[0];\n    if (property) {\n      return get(this._lottie, property.path) * (PROPERTY_SCALE / property.value);\n    }\n    return null;\n  }\n  set state(state) {\n    if (isNil(state)) {\n      resetProperties(this._lottie, this.rawProperties.filter(c => c.name.startsWith(STATE_PREFIX)));\n    } else {\n      const name = `${STATE_PREFIX}${state.toLowerCase()}`;\n      updateProperties(this._lottie, this.rawProperties.filter(c => c.name.startsWith(STATE_PREFIX)), 0);\n      updateProperties(this._lottie, this.rawProperties.filter(c => c.name === name), 1);\n    }\n    this.refresh();\n  }\n  get state() {\n    for (const property of this.rawProperties.filter(c => c.name.startsWith(STATE_PREFIX))) {\n      const value = get(this._lottie, property.path);\n      if (value) {\n        return property.name.substr(STATE_PREFIX.length);\n      }\n    }\n    return null;\n  }\n  set axis(axis) {\n    if (isNil(axis)) {\n      resetProperties(this._lottie, this.rawProperties.filter(c => c.name === 'axis'));\n    } else {\n      updateProperties(this._lottie, this.rawProperties.filter(c => c.name === 'axis'), axis, {\n        scale: PROPERTY_SCALE\n      });\n    }\n    this.refresh();\n  }\n  get axis() {\n    const property = this.rawProperties.filter(c => c.name === 'axis')[0];\n    if (property) {\n      const x = get(this._lottie, property.path + '.0') * (PROPERTY_SCALE / property.value[0]);\n      const y = get(this._lottie, property.path + '.1') * (PROPERTY_SCALE / property.value[1]);\n      return {\n        x,\n        y\n      };\n    }\n    return null;\n  }\n  set speed(speed) {\n    this._speed = speed;\n    this._lottie?.setSpeed(speed);\n  }\n  get speed() {\n    return this._speed;\n  }\n  set direction(direction) {\n    this._direction = direction;\n    this._lottie.setDirection(direction);\n  }\n  get direction() {\n    return this._direction;\n  }\n  set loop(loop) {\n    this._lottie.loop = loop;\n  }\n  get loop() {\n    return this._lottie.loop ? true : false;\n  }\n  set frame(frame) {\n    this.goToFrame(Math.max(0, Math.min(this.frames, frame)));\n  }\n  get frame() {\n    return this._lottie.currentFrame;\n  }\n  get states() {\n    return this.rawProperties.filter(c => c.name.startsWith(STATE_PREFIX)).map(c => {\n      return c.name.substr(STATE_PREFIX.length);\n    });\n  }\n  get isPlaying() {\n    return !this._lottie.isPaused;\n  }\n  get isReady() {\n    return this._isReady;\n  }\n  get frames() {\n    return this._lottie.getDuration(true) - 1;\n  }\n  get duration() {\n    return this._lottie.getDuration(false);\n  }\n  /**\n   * Access to internal lottie player instance.\n   */\n  get lottie() {\n    return this._lottie;\n  }\n  /**\n   * Supported customizable properties by loaded icon.\n   */\n  get rawProperties() {\n    if (!this._rawProperties && this._iconData) {\n      this._rawProperties = properties(this._iconData, {\n        lottieInstance: true\n      });\n    }\n    return this._rawProperties || [];\n  }\n}","map":{"version":3,"names":["deepClone","get","isNil","lottieColorToHex","properties","resetProperties","updateProperties","PROPERTY_SCALE","STATE_PREFIX","DEFAULT_LOTTIE_WEB_OPTIONS","renderer","loop","autoplay","rendererSettings","preserveAspectRatio","progressiveLoad","hideOnTransparent","createColorsProxy","Proxy","set","target","property","value","receiver","lottie","rawProperties","filter","c","type","name","toLowerCase","refresh","current","data","path","undefined","deleteProperty","ownKeys","map","has","getOwnPropertyDescriptor","enumerable","configurable","Player","_animationLoader","_container","_iconData","_options","_lottie","_isReady","_colorsProxy","_direction","_speed","_rawProperties","_eventCallbacks","constructor","animationLoader","container","iconData","options","connect","Error","animationData","addEventListener","triggerEvent","params","isLoaded","disconnect","destroy","callback","push","removeEventListener","eventName","i","len","length","splice","args","callbacks","renderFrame","play","playFromBegining","goToAndPlay","pause","stop","goToFrame","frame","goToAndStop","goToFirstFrame","goToLastFrame","Math","max","getDuration","arguments","alreadyCustomized","colors","key","Object","entries","startsWith","state","stroke","scale","axis","call","substr","x","y","speed","setSpeed","direction","setDirection","min","frames","currentFrame","states","isPlaying","isPaused","isReady","duration","lottieInstance"],"sources":["../src/player.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}