{"ast":null,"code":"/**\n * Loop trigger plays the animation from first to last frame infinitely, with no interaction necessary.\n */\nexport class Loop {\n  element;\n  targetElement;\n  player;\n  playTimeout = null;\n  constructor(element, targetElement, player) {\n    this.element = element;\n    this.targetElement = targetElement;\n    this.player = player;\n  }\n  onReady() {\n    this.player.play();\n  }\n  onDisconnected() {\n    this.resetPlayDelayTimer();\n  }\n  onComplete() {\n    this.resetPlayDelayTimer();\n    if (this.delay > 0) {\n      this.playTimeout = setTimeout(() => {\n        this.player.playFromBegining();\n      }, this.delay);\n    } else {\n      this.player.playFromBegining();\n    }\n  }\n  resetPlayDelayTimer() {\n    if (!this.playTimeout) {\n      return;\n    }\n    clearTimeout(this.playTimeout);\n    this.playTimeout = null;\n  }\n  get delay() {\n    const value = this.element.hasAttribute('delay') ? +(this.element.getAttribute('delay') || 0) : 0;\n    return Math.max(value, 0);\n  }\n}","map":{"version":3,"names":["Loop","element","targetElement","player","playTimeout","constructor","onReady","play","onDisconnected","resetPlayDelayTimer","onComplete","delay","setTimeout","playFromBegining","clearTimeout","value","hasAttribute","getAttribute","Math","max"],"sources":["../../src/triggers/loop.ts"],"sourcesContent":[null],"mappings":"AAEA;;;AAGA,OAAM,MAAOA,IAAI;EAICC,OAAA;EACAC,aAAA;EACAC,MAAA;EALNC,WAAW,GAAQ,IAAI;EAE/BC,YACcJ,OAAoB,EACpBC,aAA0B,EAC1BC,MAAe;IAFf,KAAAF,OAAO,GAAPA,OAAO;IACP,KAAAC,aAAa,GAAbA,aAAa;IACb,KAAAC,MAAM,GAANA,MAAM;EAEpB;EAEAG,OAAOA,CAAA;IACH,IAAI,CAACH,MAAM,CAACI,IAAI,EAAE;EACtB;EAEAC,cAAcA,CAAA;IACV,IAAI,CAACC,mBAAmB,EAAE;EAC9B;EAEAC,UAAUA,CAAA;IACN,IAAI,CAACD,mBAAmB,EAAE;IAE1B,IAAI,IAAI,CAACE,KAAK,GAAG,CAAC,EAAE;MAChB,IAAI,CAACP,WAAW,GAAGQ,UAAU,CAAC,MAAK;QAC/B,IAAI,CAACT,MAAM,CAACU,gBAAgB,EAAE;MAClC,CAAC,EAAE,IAAI,CAACF,KAAK,CAAC;KACjB,MAAM;MACH,IAAI,CAACR,MAAM,CAACU,gBAAgB,EAAE;;EAEtC;EAEAJ,mBAAmBA,CAAA;IACf,IAAI,CAAC,IAAI,CAACL,WAAW,EAAE;MACnB;;IAGJU,YAAY,CAAC,IAAI,CAACV,WAAW,CAAC;IAC9B,IAAI,CAACA,WAAW,GAAG,IAAI;EAC3B;EAEA,IAAIO,KAAKA,CAAA;IACL,MAAMI,KAAK,GAAG,IAAI,CAACd,OAAO,CAACe,YAAY,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,CAACf,OAAO,CAACgB,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC;IACjG,OAAOC,IAAI,CAACC,GAAG,CAACJ,KAAK,EAAE,CAAC,CAAC;EAC7B"},"metadata":{},"sourceType":"module","externalDependencies":[]}